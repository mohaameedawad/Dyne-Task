import{a as F}from"./chunk-XZ2X6LZ2.js";import{E as w,G as g,H as f,K as k,L as T,a as S,b as c,c as u,d as y,e as m,h as d,i as l,j as h,k as v,l as b,m as n,n as a,o as I,q as x,t as p,u as P,v as O,w as j,x as M}from"./chunk-HRUOLUKU.js";var E=(()=>{let t=class t{constructor(i,r){this.http=i,this.sharedService=r}placeOrder(i){var r=this.sharedService.getCartItems().map(s=>({itemId:s.id,quantity:s.quantity}));let o=F.BaseApi+"order/"+i;return this.http.post(o,r)}};t.\u0275fac=function(r){return new(r||t)(u(M),u(f))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function H(e,t){e&1&&(n(0,"div",0),p(1," Your order has been successfully sent! "),a())}function Q(e,t){if(e&1&&(n(0,"div",3),I(1,"app-item-card",7),a()),e&2){let z=t.$implicit;d(),v("item",z)("isCartPage",!0)}}var N=(()=>{let t=class t{constructor(i,r,o){this.sharedeService=i,this.router=r,this.cartService=o,this.cartItems=[],this.orderedSuccessfully=!1,this.totalCartPrice=0,this.sharedeService.updateHeaderTitle("Cart"),this.cartItems=this.sharedeService.getCartItems(),this.cartItems.length==0&&this.router.navigate(["/home"]),this.sharedeService.totalCartPrice.subscribe(s=>{this.totalCartPrice=s.toFixed(2)})}PlaceOrder(){this.cartService.placeOrder(1).subscribe(i=>{console.log(i),this.orderedSuccessfully=!0,setTimeout(()=>{this.orderedSuccessfully=!1,this.router.navigate(["/home"])},2e3),localStorage.removeItem("cartItems"),this.sharedeService.cartItems=[],this.sharedeService.updateCartQuantity(!0)},i=>{this.orderedSuccessfully=!0,setTimeout(()=>{this.orderedSuccessfully=!1,this.router.navigate(["/home"])},2e3),localStorage.removeItem("cartItems"),this.sharedeService.cartItems=[],this.sharedeService.updateCartQuantity(!0)})}};t.\u0275fac=function(r){return new(r||t)(l(f),l(w),l(E))},t.\u0275cmp=y({type:t,selectors:[["app-cart"]],decls:10,vars:3,consts:[["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"row"],["class","col-lg-6 col-md-6 col-sm-6 mb-3",4,"ngFor","ngForOf"],[1,"col-lg-6","col-md-6","col-sm-6","mb-3"],["mat-raised-button","",1,"order-button",3,"click"],[1,"order-div"],[1,"total-price"],[3,"item","isCartPage"]],template:function(r,o){r&1&&(h(0,H,2,0,"div",0),n(1,"div",1),h(2,Q,2,2,"div",2),a(),n(3,"div",1)(4,"div",3)(5,"button",4),x("click",function(){return o.PlaceOrder()}),n(6,"div",5),p(7," Order "),a(),n(8,"div",6),p(9),a()()()()),r&2&&(b(o.orderedSuccessfully?0:-1),d(2),v("ngForOf",o.cartItems),d(7),P(" ",o.totalCartPrice," EGP "))},dependencies:[O,k],styles:[".order-button[_ngcontent-%COMP%]{position:fixed;border:none;bottom:20px;left:50%;transform:translate(-50%);width:365px;height:60px;border-radius:5px;background-color:#4a4a4a;color:#fff;font-size:18px;font-weight:700;cursor:pointer;display:flex;justify-content:space-between;align-items:center;padding:10px 15px}.order-button[_ngcontent-%COMP%]:checked{background-color:#fff}.order-button[_ngcontent-%COMP%]   .order-div[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.order-button[_ngcontent-%COMP%]   .total-price[_ngcontent-%COMP%]{font-size:16px;font-weight:400;color:#fff;text-align:right}"]});let e=t;return e})();var R=[{path:"",component:N}],_=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=m({type:t}),t.\u0275inj=c({imports:[g.forChild(R),g]});let e=t;return e})();var et=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=m({type:t}),t.\u0275inj=c({imports:[j,_,T]});let e=t;return e})();export{et as CartModule};
